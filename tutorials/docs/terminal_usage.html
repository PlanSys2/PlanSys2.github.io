<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Terminal Usage &mdash; ROS2 Planning System 2 1.0.0 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/plansys2_48x48.png"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="The first planning package" href="simple_example.html" />
    <link rel="prev" title="Tutorials" href="../index.html" />

<link rel="stylesheet" href="../../_static/tcs_theme.css" type="text/css" />


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: orange" >
            <a href="../../index.html" class="icon icon-home"> ROS2 Planning System 2
            <img src="../../_static/plansys2_logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                latest
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/index.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../getting_started/index.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting_started/index.html#running-the-example">Running the Example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../build_instructions/index.html">Build and Install</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../build_instructions/index.html#install">Install</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../build_instructions/index.html#build">Build</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../build_instructions/index.html#install-ros">Install ROS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../build_instructions/index.html#build-plansys2">Build PlanSys2</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../design/index.html">PlanSys2 design</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../design/index.html#domain-expert">1. Domain Expert</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../design/index.html#parameters">Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../design/index.html#client-api">Client API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../design/index.html#services">Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../design/index.html#publishers-subscriber">Publishers / Subscriber</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../design/index.html#problem-expert">2. Problem Expert</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../design/index.html#id1">Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../design/index.html#id3">Client API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../design/index.html#id4">Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../design/index.html#id5">Publishers / Subscriber</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../design/index.html#planner">3. Planner</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../design/index.html#id6">Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../design/index.html#id7">Client API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../design/index.html#id8">Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../design/index.html#id9">Publishers / Subscriber</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../design/index.html#executor">4. Executor</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../design/index.html#id10">Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../design/index.html#id14">Client API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../design/index.html#actions">Actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../design/index.html#id15">Publishers / Subscriber</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../design/index.html#behavior-tree-builder">Behavior Tree builder</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../design/index.html#action-delivery-protocol">Action delivery protocol</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../design/index.html#id16">Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../design/index.html#id17">Publishers / Subscriber</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Tutorials</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Terminal Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tutorial-steps">Tutorial Steps</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#requisites">0- Requisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="#launch-plansys2">1- Launch PlanSys2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#execute-plansys2-terminal">2- Execute PlanSys2 terminal</a></li>
<li class="toctree-l4"><a class="reference internal" href="#interactive-session">2- Interactive session</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="simple_example.html">The first planning package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="simple_example.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="simple_example.html#tutorial-steps">Tutorial Steps</a><ul>
<li class="toctree-l4"><a class="reference internal" href="simple_example.html#requisites">0- Requisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="simple_example.html#running-the-example">1- Running the example</a></li>
<li class="toctree-l4"><a class="reference internal" href="simple_example.html#package-structure">2- Package structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="simple_example.html#actions-implementation">3- Actions implementation</a></li>
<li class="toctree-l4"><a class="reference internal" href="simple_example.html#launcher">4- Launcher</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="controller_example.html">Using a planning controller</a><ul>
<li class="toctree-l3"><a class="reference internal" href="controller_example.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="controller_example.html#tutorial-steps">Tutorial Steps</a><ul>
<li class="toctree-l4"><a class="reference internal" href="controller_example.html#requisites">0- Requisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="controller_example.html#running-the-example">1- Running the example</a></li>
<li class="toctree-l4"><a class="reference internal" href="controller_example.html#patrol-action-performer">2- Patrol action performer</a></li>
<li class="toctree-l4"><a class="reference internal" href="controller_example.html#move-action-performer">3- Move action performer</a></li>
<li class="toctree-l4"><a class="reference internal" href="controller_example.html#mission-controller">3- Mission controller</a></li>
<li class="toctree-l4"><a class="reference internal" href="controller_example.html#running-the-example-with-nav2">4- Running the example with Nav2</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="bt_actions.html">Implement actions as Behavior Trees</a><ul>
<li class="toctree-l3"><a class="reference internal" href="bt_actions.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="bt_actions.html#tutorial-steps">Tutorial Steps</a><ul>
<li class="toctree-l4"><a class="reference internal" href="bt_actions.html#requisites">0- Requisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="bt_actions.html#running-the-example">1- Running the example</a></li>
<li class="toctree-l4"><a class="reference internal" href="bt_actions.html#using-behavior-trees">2- Using Behavior Trees</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About and Contact</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../about/index.html#id1">About</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/index.html#contact">Contact</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: orange" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ROS2 Planning System 2</a>
      </nav>

      <div class="wy-nav-content">

<span style="float: right;" >
    <a class="github-button" href="https://github.com/PlanSys2/PlanSys2.github.io" data-color-scheme="no-preference: light; light: light; dark: dark;" data-size="large" aria-label="Edit IntelligentRoboticsLabs/plansys2.github.io on GitHub" ">Edit</a>
</span>


        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Tutorials</a></li>
      <li class="breadcrumb-item active">Terminal Usage</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="terminal-usage">
<span id="id1"></span><h1>Terminal Usage<a class="headerlink" href="#terminal-usage" title="Permalink to this headline"></a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#overview">Overview</a></p></li>
<li><p><a class="reference internal" href="#tutorial-steps">Tutorial Steps</a></p></li>
</ul>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline"></a></h2>
<p>The terminal is an application that allows the interaction with PlanSys2 to test or monitor its operation.
It is not essential to use PlanSys2 since your application is expected to manage the plans’ knowledge and execution automatically.
Still, it is useful and convenient to get to know the terminal in these first tutorials.</p>
<p>This tutorial shows how to use the terminal and the main commands and is also a good starting point for working with PlanSys2.</p>
</div>
<div class="section" id="tutorial-steps">
<h2>Tutorial Steps<a class="headerlink" href="#tutorial-steps" title="Permalink to this headline"></a></h2>
<div class="section" id="requisites">
<h3>0- Requisites<a class="headerlink" href="#requisites" title="Permalink to this headline"></a></h3>
<p>Follow the same process as in <a class="reference internal" href="../../getting_started/index.html#getting-started"><span class="std std-ref">Getting Started</span></a> for installing PlanSys2.</p>
<p>We will use a test PDDL domain. If you do not know what PDDL is, it is recommended to take a look at one of these links first:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://arxiv.org/pdf/1106.4561.pdf">PDDL 2.1</a></p></li>
<li><p><a class="reference external" href="http://www.cs.toronto.edu/~sheila/2542/w09/A1/introtopddl2.pdf">An Introduction to PDDL</a></p></li>
<li><p><a class="reference external" href="http://www.cs.toronto.edu/~sheila/384/w11/Assignments/A3/veloso-PDDL_by_Example.pdf">PDDL by Example</a></p></li>
</ul>
<p>Download a simple PDDL domain for this tutorial. Later, you could reproduce the steps of this tutorial with your own domain:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>wget -P /tmp https://raw.githubusercontent.com/IntelligentRoboticsLabs/ros2_planning_system_examples/master/plansys2_simple_example/pddl/simple_example.pddl
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="launch-plansys2">
<h3>1- Launch PlanSys2<a class="headerlink" href="#launch-plansys2" title="Permalink to this headline"></a></h3>
<p>PlanSys2 can be launched with two different launchers that implement two different execution forms: distributed or monolithic.
In distributed form, each component of PlanSys2 runs in a different process, and to launch it, each component’s launchers are called
in cascade. In monolithic form, all components are released in the same process.</p>
<p>In the first steps with PlanSys2, it is irrelevant how we execute it to choose any of them. Both launchers have a parameter where
the PDDL domain file to use is specified.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2 launch plansys2_bringup plansys2_bringup_launch_distributed.py model_file:<span class="o">=</span>/tmp/simple_example.pddl
</pre></div>
</div>
</div></blockquote>
<p>If all went well, all components of PlanSys2 will have been launched and awaits requests.</p>
</div>
<div class="section" id="execute-plansys2-terminal">
<h3>2- Execute PlanSys2 terminal<a class="headerlink" href="#execute-plansys2-terminal" title="Permalink to this headline"></a></h3>
<p>The PlanSys2 terminal is executed by entering the following command in another terminal:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2 run plansys2_terminal plansys2_terminal
</pre></div>
</div>
</div></blockquote>
<p>At that moment, an interactive shell will open in which we can enter commands. We can use the up and down arrows to
navigate between the commands already entered or use <code class="docutils literal notranslate"><span class="pre">Ctrl-R</span></code> as in the shell to search for commands. It also has
autocompletion with the <code class="docutils literal notranslate"><span class="pre">Tab</span></code> key. You can quit anytime typing “quit” or pressing <code class="docutils literal notranslate"><span class="pre">Ctrl-D</span></code>.</p>
<p>It should be noted that the state of the system is at PlanSys2 components, not in the terminal. You can close and
reopen (or even use several terminals), and the system’s state persists. If you want to reset the system, press <code class="docutils literal notranslate"><span class="pre">Ctrl-C</span></code> in the terminal
where you launched PlanSys2, and relaunch it.</p>
<blockquote>
<div><div class="highlight-lisp notranslate"><div class="highlight"><pre><span></span><span class="nv">ROS2</span> <span class="nv">Planning</span> <span class="nv">System</span> <span class="nv">console.</span> <span class="nv">Type</span> <span class="s">&quot;quit&quot;</span> <span class="nv">to</span> <span class="nv">finish</span>
<span class="nb">&gt;</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="interactive-session">
<h3>2- Interactive session<a class="headerlink" href="#interactive-session" title="Permalink to this headline"></a></h3>
<ol class="arabic simple">
<li><p>The first thing is to check the domain that is being used. In the PlanSys2 terminal window type:</p></li>
</ol>
<blockquote>
<div><div class="highlight-lisp notranslate"><div class="highlight"><pre><span></span><span class="nb">get</span> <span class="nv">domain</span>

<span class="p">(</span> <span class="nv">define</span> <span class="p">(</span> <span class="nv">domain</span> <span class="nv">simple</span> <span class="p">)</span>
<span class="p">(</span> <span class="ss">:requirements</span> <span class="ss">:strips</span> <span class="ss">:adl</span> <span class="ss">:typing</span> <span class="ss">:durative-actions</span> <span class="ss">:fluents</span> <span class="p">)</span>
<span class="p">(</span> <span class="ss">:types</span>
  <span class="nv">robot</span> <span class="nb">-</span> <span class="nv">object</span>
  <span class="nb">room</span> <span class="nb">-</span> <span class="nv">object</span>
<span class="p">)</span>
<span class="p">(</span> <span class="ss">:predicates</span>
  <span class="p">(</span> <span class="nv">robot_at</span> <span class="nv">?robot0</span> <span class="nb">-</span> <span class="nv">robot</span> <span class="nv">?room1</span> <span class="nb">-</span> <span class="nb">room</span> <span class="p">)</span>
  <span class="p">(</span> <span class="nv">connected</span> <span class="nv">?room0</span> <span class="nb">-</span> <span class="nb">room</span> <span class="nv">?room1</span> <span class="nb">-</span> <span class="nb">room</span> <span class="p">)</span>
  <span class="p">(</span> <span class="nv">battery_full</span> <span class="nv">?robot0</span> <span class="nb">-</span> <span class="nv">robot</span> <span class="p">)</span>

  <span class="o">...</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>To see what types of instances the model contains, type:</p></li>
</ol>
<blockquote>
<div><div class="highlight-lisp notranslate"><div class="highlight"><pre><span></span><span class="nb">get</span> <span class="nv">model</span> <span class="nv">types</span>
<span class="nv">Types:</span> <span class="mi">2</span>
          <span class="nv">robot</span>
          <span class="nb">room</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>Use other variations of <code class="docutils literal notranslate"><span class="pre">get</span> <span class="pre">model</span></code> to get more information of the domain:</p></li>
</ol>
<blockquote>
<div><div class="highlight-lisp notranslate"><div class="highlight"><pre><span></span><span class="nb">get</span> <span class="nv">model</span> <span class="nv">actions</span>
<span class="nv">Actions:</span> <span class="mi">0</span>
  <span class="nv">move</span> <span class="p">(</span><span class="nv">durative</span> <span class="nv">action</span><span class="p">)</span>
  <span class="nv">askcharge</span> <span class="p">(</span><span class="nv">durative</span> <span class="nv">action</span><span class="p">)</span>
  <span class="nv">charge</span> <span class="p">(</span><span class="nv">durative</span> <span class="nv">action</span><span class="p">)</span>

<span class="nb">get</span> <span class="nv">model</span> <span class="nv">predicates</span>
<span class="nv">Predicates:</span> <span class="mi">5</span>
  <span class="nv">robot_at</span>
  <span class="nv">connected</span>
  <span class="nv">battery_full</span>
  <span class="nv">battery_low</span>
  <span class="nv">charging_point_at</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>It is also possible to get the details of a predicate or an action:</p></li>
</ol>
<blockquote>
<div><div class="highlight-lisp notranslate"><div class="highlight"><pre><span></span><span class="nb">get</span> <span class="nv">model</span> <span class="nv">predicate</span> <span class="nv">robot_at</span>
<span class="nv">Parameters:</span> <span class="mi">2</span>
 <span class="nv">robot</span> <span class="nb">-</span> <span class="nv">?robot0</span>
 <span class="nb">room</span> <span class="nb">-</span> <span class="nv">?room1</span>

<span class="nb">get</span> <span class="nv">model</span> <span class="nv">action</span> <span class="nv">move</span>
<span class="nv">Type:</span> <span class="nv">durative-action</span>
<span class="nv">Parameters:</span> <span class="mi">3</span>
 <span class="nv">?0</span> <span class="nb">-</span> <span class="nv">robot</span>
 <span class="nv">?1</span> <span class="nb">-</span> <span class="nb">room</span>
 <span class="nv">?2</span> <span class="nb">-</span> <span class="nb">room</span>
<span class="nv">AtStart</span> <span class="nv">requirements:</span> <span class="p">(</span><span class="nb">and</span> <span class="p">(</span><span class="nv">connected</span> <span class="nv">?1</span> <span class="nv">?2</span><span class="p">)(</span><span class="nv">robot_at</span> <span class="nv">?0</span> <span class="nv">?1</span><span class="p">))</span>
<span class="nv">OverAll</span> <span class="nv">requirements:</span> <span class="p">(</span><span class="nb">and</span> <span class="p">(</span><span class="nv">battery_full</span> <span class="nv">?0</span><span class="p">))</span>
<span class="nv">AtEnd</span> <span class="nv">requirements:</span>
<span class="nv">AtStart</span> <span class="nv">effect:</span> <span class="p">(</span><span class="nb">and</span> <span class="p">(</span><span class="nb">not</span> <span class="p">(</span><span class="nv">robot_at</span> <span class="nv">?0</span> <span class="nv">?1</span><span class="p">)))</span>
<span class="nv">AtEnd</span> <span class="nv">effect:</span> <span class="p">(</span><span class="nb">and</span> <span class="p">(</span><span class="nv">robot_at</span> <span class="nv">?0</span> <span class="nv">?2</span><span class="p">))</span>
</pre></div>
</div>
</div></blockquote>
<p>5. So far, we have seen how to inspect the model, which remains unchanged during the
execution of PlanSys2. We could say that it is the static part of the planning ingredients.
The other ingredient is the problem, which contains the instances, grounded (not generic as in
the domain, but already with instances) predicates, and goals. We will check that it is empty for now.</p>
<blockquote>
<div><div class="highlight-lisp notranslate"><div class="highlight"><pre><span></span><span class="nb">get</span> <span class="nv">problem</span> <span class="nv">instances</span>
<span class="nv">Instances:</span> <span class="mi">0</span>

<span class="nb">get</span> <span class="nv">problem</span> <span class="nv">predicates</span>
<span class="nv">Predicates:</span> <span class="mi">0</span>

<span class="nb">get</span> <span class="nv">problem</span> <span class="nv">goal</span>
<span class="nv">Goal:</span>
</pre></div>
</div>
</div></blockquote>
<p>6. First, let’s add instances. If you analyze the domain, we want a robot to be able to move between rooms. For
this, the robot must have a battery, and the rooms must be connected. Therefore, we need rooms and a robot:</p>
<blockquote>
<div><div class="highlight-lisp notranslate"><div class="highlight"><pre><span></span><span class="nb">set</span> <span class="nv">instance</span> <span class="nv">leia</span> <span class="nv">robot</span>
<span class="nb">set</span> <span class="nv">instance</span> <span class="nv">entrance</span> <span class="nb">room</span>
<span class="nb">set</span> <span class="nv">instance</span> <span class="nv">kitchen</span> <span class="nb">room</span>
<span class="nb">set</span> <span class="nv">instance</span> <span class="nv">bedroom</span> <span class="nb">room</span>
<span class="nb">set</span> <span class="nv">instance</span> <span class="nv">dinning</span> <span class="nb">room</span>
<span class="nb">set</span> <span class="nv">instance</span> <span class="nv">bathroom</span> <span class="nb">room</span>
<span class="nb">set</span> <span class="nv">instance</span> <span class="nv">chargingroom</span> <span class="nb">room</span>
</pre></div>
</div>
</div></blockquote>
<p>If no errros, these instances can be checked by typing:</p>
<blockquote>
<div><div class="highlight-lisp notranslate"><div class="highlight"><pre><span></span><span class="nb">get</span> <span class="nv">problem</span> <span class="nv">instances</span>
<span class="nv">Instances:</span> <span class="mi">7</span>
 <span class="nv">leia</span>    <span class="nv">robot</span>
 <span class="nv">entrance</span>        <span class="nb">room</span>
 <span class="nv">kitchen</span> <span class="nb">room</span>
 <span class="nv">bedroom</span> <span class="nb">room</span>
 <span class="nv">dinning</span> <span class="nb">room</span>
 <span class="nv">bathroom</span>        <span class="nb">room</span>
 <span class="nv">chargingroom</span>    <span class="nb">room</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="7">
<li><p>To add predicates, we type:</p></li>
</ol>
<blockquote>
<div><div class="highlight-lisp notranslate"><div class="highlight"><pre><span></span><span class="nb">set</span> <span class="nv">predicate</span> <span class="p">(</span><span class="nv">connected</span> <span class="nv">entrance</span> <span class="nv">dinning</span><span class="p">)</span>
<span class="nb">set</span> <span class="nv">predicate</span> <span class="p">(</span><span class="nv">connected</span> <span class="nv">dinning</span> <span class="nv">entrance</span><span class="p">)</span>

<span class="nb">set</span> <span class="nv">predicate</span> <span class="p">(</span><span class="nv">connected</span> <span class="nv">dinning</span> <span class="nv">kitchen</span><span class="p">)</span>
<span class="nb">set</span> <span class="nv">predicate</span> <span class="p">(</span><span class="nv">connected</span> <span class="nv">kitchen</span> <span class="nv">dinning</span><span class="p">)</span>

<span class="nb">set</span> <span class="nv">predicate</span> <span class="p">(</span><span class="nv">connected</span> <span class="nv">dinning</span> <span class="nv">bedroom</span><span class="p">)</span>
<span class="nb">set</span> <span class="nv">predicate</span> <span class="p">(</span><span class="nv">connected</span> <span class="nv">bedroom</span> <span class="nv">dinning</span><span class="p">)</span>

<span class="nb">set</span> <span class="nv">predicate</span> <span class="p">(</span><span class="nv">connected</span> <span class="nv">bathroom</span> <span class="nv">bedroom</span><span class="p">)</span>
<span class="nb">set</span> <span class="nv">predicate</span> <span class="p">(</span><span class="nv">connected</span> <span class="nv">bedroom</span> <span class="nv">bathroom</span><span class="p">)</span>

<span class="nb">set</span> <span class="nv">predicate</span> <span class="p">(</span><span class="nv">connected</span> <span class="nv">chargingroom</span> <span class="nv">kitchen</span><span class="p">)</span>
<span class="nb">set</span> <span class="nv">predicate</span> <span class="p">(</span><span class="nv">connected</span> <span class="nv">kitchen</span> <span class="nv">chargingroom</span><span class="p">)</span>

<span class="nb">set</span> <span class="nv">predicate</span> <span class="p">(</span><span class="nv">charging_point_at</span> <span class="nv">chargingroom</span><span class="p">)</span>
<span class="nb">set</span> <span class="nv">predicate</span> <span class="p">(</span><span class="nv">battery_low</span> <span class="nv">leia</span><span class="p">)</span>
<span class="nb">set</span> <span class="nv">predicate</span> <span class="p">(</span><span class="nv">robot_at</span> <span class="nv">leia</span> <span class="nv">entrance</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>Let’s check it:</p>
<blockquote>
<div><div class="highlight-lisp notranslate"><div class="highlight"><pre><span></span><span class="nb">get</span> <span class="nv">problem</span> <span class="nv">predicates</span>
<span class="nv">Predicates:</span> <span class="mi">13</span>
<span class="p">(</span><span class="nv">connected</span> <span class="nv">entrance</span> <span class="nv">dinning</span><span class="p">)</span>
<span class="p">(</span><span class="nv">connected</span> <span class="nv">dinning</span> <span class="nv">entrance</span><span class="p">)</span>
<span class="p">(</span><span class="nv">connected</span> <span class="nv">dinning</span> <span class="nv">kitchen</span><span class="p">)</span>
<span class="p">(</span><span class="nv">connected</span> <span class="nv">kitchen</span> <span class="nv">dinning</span><span class="p">)</span>
<span class="p">(</span><span class="nv">connected</span> <span class="nv">dinning</span> <span class="nv">bedroom</span><span class="p">)</span>
<span class="p">(</span><span class="nv">connected</span> <span class="nv">bedroom</span> <span class="nv">dinning</span><span class="p">)</span>
<span class="p">(</span><span class="nv">connected</span> <span class="nv">bathroom</span> <span class="nv">bedroom</span><span class="p">)</span>
<span class="p">(</span><span class="nv">connected</span> <span class="nv">bedroom</span> <span class="nv">bathroom</span><span class="p">)</span>
<span class="p">(</span><span class="nv">connected</span> <span class="nv">chargingroom</span> <span class="nv">kitchen</span><span class="p">)</span>
<span class="p">(</span><span class="nv">connected</span> <span class="nv">kitchen</span> <span class="nv">chargingroom</span><span class="p">)</span>
<span class="p">(</span><span class="nv">charging_point_at</span> <span class="nv">chargingroom</span><span class="p">)</span>
<span class="p">(</span><span class="nv">battery_low</span> <span class="nv">leia</span><span class="p">)</span>
<span class="p">(</span><span class="nv">robot_at</span> <span class="nv">leia</span> <span class="nv">entrance</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>8. The predicates and instances previously added to the problem are the knowledge used to
generate the plan. Also, we need to have an objective of our planning, which is a logic expression
to end up being true. It is usually a predicate that we want to add to the knowledge:</p>
<blockquote>
<div><div class="highlight-lisp notranslate"><div class="highlight"><pre><span></span><span class="nb">set</span> <span class="nv">goal</span> <span class="p">(</span><span class="nb">and</span><span class="p">(</span><span class="nv">robot_at</span> <span class="nv">leia</span> <span class="nv">bathroom</span><span class="p">))</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="9">
<li><p>At this time we can ask that the plan be calculated to obtain this goal:</p></li>
</ol>
<blockquote>
<div><div class="highlight-lisp notranslate"><div class="highlight"><pre><span></span><span class="nb">get</span> <span class="nv">plan</span>
<span class="nv">plan:</span>
<span class="mi">0</span>        <span class="p">(</span><span class="nv">askcharge</span> <span class="nv">leia</span> <span class="nv">entrance</span> <span class="nv">chargingroom</span><span class="p">)</span>  <span class="mi">5</span>
<span class="mf">0.001</span>    <span class="p">(</span><span class="nv">charge</span> <span class="nv">leia</span> <span class="nv">chargingroom</span><span class="p">)</span>      <span class="mi">5</span>
<span class="mf">5.002</span>    <span class="p">(</span><span class="nv">move</span> <span class="nv">leia</span> <span class="nv">chargingroom</span> <span class="nv">kitchen</span><span class="p">)</span>        <span class="mi">5</span>
<span class="mf">10.003</span>   <span class="p">(</span><span class="nv">move</span> <span class="nv">leia</span> <span class="nv">kitchen</span> <span class="nv">dinning</span><span class="p">)</span>     <span class="mi">5</span>
<span class="mf">15.004</span>   <span class="p">(</span><span class="nv">move</span> <span class="nv">leia</span> <span class="nv">dinning</span> <span class="nv">bedroom</span><span class="p">)</span>     <span class="mi">5</span>
<span class="mf">20.005</span>   <span class="p">(</span><span class="nv">move</span> <span class="nv">leia</span> <span class="nv">bedroom</span> <span class="nv">bathroom</span><span class="p">)</span>    <span class="mi">5</span>
</pre></div>
</div>
</div></blockquote>
<p>To create the plan, the first thing to do is generate two files: <code class="docutils literal notranslate"><span class="pre">`/tmp/domain.pddl`</span></code> and <code class="docutils literal notranslate"><span class="pre">`/tmp/problem.pddl`</span></code>.
You can check that they are there from the last planning. In fact, we can run the planner directly by typing in a shell in another terminal:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2 run popf popf /tmp/domain.pddl /tmp/problem.pddl
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="10">
<li><p>We can also delete instances, predicates or the goal:</p></li>
</ol>
<blockquote>
<div><div class="highlight-lisp notranslate"><div class="highlight"><pre><span></span><span class="nb">remove</span> <span class="nv">instance</span> <span class="nv">leia</span>
<span class="nb">remove</span> <span class="nv">predicate</span> <span class="p">(</span><span class="nv">connected</span> <span class="nv">entrance</span> <span class="nv">dinning</span><span class="p">)</span>
<span class="nb">remove</span> <span class="nv">goal</span>
</pre></div>
</div>
</div></blockquote>
<p>11. What we will not be able to do is execute the plan (we would do it with the <code class="docutils literal notranslate"><span class="pre">run</span></code> command) because there is no node
running right now that implements the domain actions. We will see that in the next tutorial.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020.</p>
  </div>

   

</footer>
        </div>


      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

<script type="text/javascript" src="../../_static/tcs_theme.js"></script>
<script async defer src="https://buttons.github.io/buttons.js"></script>



</body>
</html>